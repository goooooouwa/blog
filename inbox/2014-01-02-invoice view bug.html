<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.13 (455674)"/><meta name="author" content="Greg Xu"/><meta name="created" content="2014-01-02 09:40:10 +0000"/><meta name="updated" content="2014-02-07 08:51:58 +0000"/><title>invoice view bug</title></head><body><div>bug: when PT mark <span>an invoice which has been viewed more than once</span> as "paid", it won't be moved to paid invoice section.</div><div><br clear="none"/></div><div>process:</div><div>I first add breakpoints to observe it's behavior. I then noticed </div><div><br clear="none"/></div><div>techniques:</div><div><br clear="none"/></div><div>reason:</div><div>The invoice on invoice list is referenced by the invoice in the invoice detail view when invoice detail view is created. When the invoice detail view is cleaned, it will also clean event handlers on it's invoice which is actually a reference to the one on invoice list. So when the view is cleaned up, the event handlers on the invoice on invoice list will be removed. This causes the problem. Because the next time the invoice being clicked, the invoice detail view, on it's creation, will only add event handler for it's own invoice, which even is still a reference to the one on list, will not have the event handler for invoice list originally added by invoice list when it's created.</div></body></html>