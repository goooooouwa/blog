<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.13 (455674)"/><meta name="keywords" content="cancancan"/><meta name="created" content="2014-08-28 12:30:23 +0000"/><meta name="source" content="web.clip"/><meta name="source-url" content="https://github.com/ryanb/cancan/wiki/Defining-Abilities-with-Blocks"/><meta name="updated" content="2014-11-07 03:34:33 +0000"/><title>Defining Abilities with Blocks · ryanb/cancan Wiki</title></head><body>So this basically means, if you wanna use accessible_by method, you need to supply an SQL string which represents the same condition you specified in the condition block.<hr/><br/><div style="font-size: 16px"><div style="box-sizing:border-box;font-family:sans-serif;"><div style="box-sizing:border-box;font-style:normal;font-variant:normal;font-weight:normal;font-size:13px;font-family:Helvetica, arial, freesans, clean, sans-serif, 'Segoe UI Emoji', 'Segoe UI Symbol';line-height:1.4;color:rgb(51, 51, 51);background-color:rgb(255, 255, 255);"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;overflow:hidden;font-family:'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif;font-size:16px;line-height:1.6;word-wrap:break-word;word-break:break-word;"><p style="box-sizing:border-box;">A block's conditions are only executable through Ruby. If you are <a href="https://github.com/ryanb/cancan/wiki/Fetching-Records" style="box-sizing:border-box;background:transparent;color:rgb(65, 131, 196);text-decoration:none;">Fetching Records</a> using <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;letter-spacing:-0.2em;"> </span>accessible_by<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;letter-spacing:-0.2em;"> </span></code> it will raise an exception. To fetch records from the database you need to <span style="x-evernote:highlighted;background-color:#F6EE96;">supply an SQL string representing the condition.</span> The SQL will go in the <code style="box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;padding:0.2em 0px;margin:0px;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;background-color:rgba(0, 0, 0, 0.0392157);"><span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;letter-spacing:-0.2em;"> </span>WHERE<span style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:85%;letter-spacing:-0.2em;"> </span></code> clause, if you need to do joins consider using sub-queries or scopes (below).</p></div></div></div></div></div></div></div></div></div></div></div></div></div><br/></body></html>