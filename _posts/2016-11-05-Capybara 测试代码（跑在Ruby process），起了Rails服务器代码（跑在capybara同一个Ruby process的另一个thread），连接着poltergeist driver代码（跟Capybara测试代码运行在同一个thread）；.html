<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.13 (455674)"/><meta name="created" content="2016-11-05 07:05:59 +0000"/><meta name="updated" content="2016-11-05 07:05:59 +0000"/><title>Capybara 测试代码（跑在Ruby process），起了Rails服务器代码（跑在capybara同一个Ruby process的另一个thread），连接着poltergeist driver代码（跟Capybara测试代码运行在同一个thread）；</title></head><body>
<div>
<p><span>Capybara 测试代码（跑在Ruby process），起了Rails服务器代码（跑在capybara同一个Ruby process的另一个thread），连接着poltergeist driver代码（跟Capybara测试代码运行在同一个thread）；</span></p>
<p><span>Poltergeist向phantomjs（跑在另一个node.js JavaScript process）网络请求；</span></p>
<p><span>Phantomjs（无头浏览器）处理接收到的网络请求（向Rails服务器发送网络请求）；</span></p>
<p><span/><br/></p>
<p><span>所以一共是2个进程（其中一个有2两个线程）相互通信。测试线程与phantomjs进程通过websocket通信，phantomjs进程与rails线程通过HTTP通信。</span></p>
<p><span/><br/></p>
</div>
</body></html>